{"version":3,"sources":["index.js","framify.js"],"names":["container","displayIntervalID","document","querySelector","buttonsWrapper","playButton","pauseButton","nextButton","previousButton","elementsWrapper","elements","querySelectorAll","width","getElementWidth","scrollSpeed","displayInterval","parseInt","getAttribute","elementCount","length","window","onload","scrollLeft","hasAttribute","setTimeout","click","addEventListener","setInterval","handleNextElement","classList","add","remove","clearInterval","handlePreviousElement","currentElementIndex","mod","insertBefore","firstChild","scrollElement","style","opacity","appendChild","elementToScroll","scrollVelocity","scrollMagnitude","scrolled","intervalID","Math","abs","x","n","element","clientWidth"],"mappings":";AA2GC,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EA3Gc,IAAA,EAAA,WACPA,IA6BFC,EA7BED,EAAYE,SAASC,cAAc,sBACnCC,EAAiBF,SAASC,cAAc,4BACxCE,EAAaH,SAASC,cAAc,wBACpCG,EAAcJ,SAASC,cAAc,yBACrCI,EAAaL,SAASC,cAAc,wBACpCK,EAAiBN,SAASC,cAAc,4BACxCM,EAAkBP,SAASC,cAAc,6BACzCO,EAAWR,SAASS,iBAAiB,oBAEvCC,EAAQC,EAAgBb,GACxBc,EA8FK,GA7FHC,EAAkBC,SAAShB,EAAUiB,aAAa,kBAClDC,EAAeR,EAASS,OAE9BC,OAAOC,OAAS,WACdZ,EAAgBa,WAAa,EACzBtB,EAAUuB,aAAa,kBACzBC,WAAW,WAAMnB,OAAAA,EAAWoB,SAAS,KAMzCL,OAAOM,iBAAiB,SAAU,WAChCd,EAAQC,EAAgBb,GAExBS,EAAgBa,WAAa,IAI/BjB,EAAWqB,iBAAiB,QAAS,WACnCzB,EAAoB0B,YAAYC,EAAmBb,GACnDV,EAAWwB,UAAUC,IAAI,yBACzBxB,EAAYuB,UAAUE,OAAO,2BAG/BzB,EAAYoB,iBAAiB,QAAS,WACpCM,cAAc/B,GACdI,EAAWwB,UAAUE,OAAO,yBAC5BzB,EAAYuB,UAAUC,IAAI,2BAG5BvB,EAAWmB,iBAAiB,QAASE,GACrCpB,EAAekB,iBAAiB,QAyBvBO,WACPC,EAAsBC,EAAID,EAAsB,EAAGhB,GACnDT,EAAgB2B,aACd1B,EAASwB,GACTzB,EAAgB4B,YAElB5B,EAAgBa,YAAcV,EAC9B0B,EAAc7B,GAAkBK,EAAaF,KA9B/CZ,EAAU0B,iBACR,YACA,WAAOtB,OAAAA,EAAemC,MAAMC,QAAU,IAGxCxC,EAAU0B,iBACR,WACA,WAAOtB,OAAAA,EAAemC,MAAMC,QAAU,IAKpCN,IAAAA,EAAsB,EAEjBN,SAAAA,IACPU,EAAc7B,EAAiBK,EAAaF,GAC5CY,WAAW,WACTf,EAAgBgC,YAAY/B,EAASwB,IACrCA,GAAuBA,EAAsB,GAAKhB,EAClDT,EAAgBa,YAAcV,GAC7BA,GAaI0B,SAAAA,EAAcI,EAAiBC,EAAgBC,GAClDC,IAAAA,EAAW,EACTC,EAAa1B,OAAOO,YAAY,WACpCe,EAAgBpB,YAAcqB,GAC9BE,GAAYE,KAAKC,IAAIL,KACLC,GACdxB,OAAOY,cAAcc,IAEtB,IAWCX,IAAAA,EAAM,SAACc,EAAGC,GAAM,OAAED,EAAIC,EAAKA,GAAKA,GAE7BrC,SAAAA,EAAgBsC,GAChBA,OAAAA,EAAQC,cAMlB,QAAA,QAAA;;;;ACxGD,aAHA,IAAA,EAAA,EAAA,QAAA,MAGA,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAFA,QAAA,kBAEA,EAAA,EAAA","file":"framify.b11633b7.js","sourceRoot":"../src","sourcesContent":["export default () => {\n  const container = document.querySelector(\".framify-container\");\n  const buttonsWrapper = document.querySelector(\".framify-buttons-wrapper\");\n  const playButton = document.querySelector(\".framify-button-play\");\n  const pauseButton = document.querySelector(\".framify-button-pause\");\n  const nextButton = document.querySelector(\".framify-button-next\");\n  const previousButton = document.querySelector(\".framify-button-previous\");\n  const elementsWrapper = document.querySelector(\".framify-elements-wrapper\");\n  const elements = document.querySelectorAll(\".framify-element\");\n\n  let width = getElementWidth(container);\n  let scrollSpeed = setScrollSpeed(width);\n  const displayInterval = parseInt(container.getAttribute(\"data-interval\"));\n  const elementCount = elements.length;\n\n  window.onload = function() {\n    elementsWrapper.scrollLeft = 0;\n    if (container.hasAttribute(\"data-playback\")) {\n      setTimeout(() => playButton.click(), 50);\n    }\n  };\n\n  /* Event Listeners */\n\n  window.addEventListener(\"resize\", () => {\n    width = getElementWidth(container);\n    setScrollSpeed(width);\n    elementsWrapper.scrollLeft = 0;\n  });\n\n  let displayIntervalID;\n  playButton.addEventListener(\"click\", () => {\n    displayIntervalID = setInterval(handleNextElement, displayInterval);\n    playButton.classList.add(\"framify-button-hidden\");\n    pauseButton.classList.remove(\"framify-button-hidden\");\n  });\n\n  pauseButton.addEventListener(\"click\", () => {\n    clearInterval(displayIntervalID);\n    playButton.classList.remove(\"framify-button-hidden\");\n    pauseButton.classList.add(\"framify-button-hidden\");\n  });\n\n  nextButton.addEventListener(\"click\", handleNextElement);\n  previousButton.addEventListener(\"click\", handlePreviousElement);\n\n  container.addEventListener(\n    \"mouseover\",\n    () => (buttonsWrapper.style.opacity = 1)\n  );\n\n  container.addEventListener(\n    \"mouseout\",\n    () => (buttonsWrapper.style.opacity = 0)\n  );\n\n  /* Event Handlers */\n\n  let currentElementIndex = 0;\n\n  function handleNextElement() {\n    scrollElement(elementsWrapper, scrollSpeed, width);\n    setTimeout(() => {\n      elementsWrapper.appendChild(elements[currentElementIndex]);\n      currentElementIndex = (currentElementIndex + 1) % elementCount;\n      elementsWrapper.scrollLeft -= width;\n    }, width);\n  }\n\n  function handlePreviousElement() {\n    currentElementIndex = mod(currentElementIndex - 1, elementCount);\n    elementsWrapper.insertBefore(\n      elements[currentElementIndex],\n      elementsWrapper.firstChild\n    );\n    elementsWrapper.scrollLeft += width;\n    scrollElement(elementsWrapper, -scrollSpeed, width);\n  }\n\n  function scrollElement(elementToScroll, scrollVelocity, scrollMagnitude) {\n    let scrolled = 0;\n    const intervalID = window.setInterval(function() {\n      elementToScroll.scrollLeft += scrollVelocity;\n      scrolled += Math.abs(scrollVelocity);\n      if (scrolled >= scrollMagnitude) {\n        window.clearInterval(intervalID);\n      }\n    }, 10);\n  }\n\n  /* Helper Functions */\n\n  /**\n   * Computes x mod n\n   * x arbitrary integer\n   * n natural number\n   * Source: https://maurobringolf.ch/2017/12/a-neat-trick-to-compute-modulo-of-negative-numbers/\n   */\n  const mod = (x, n) => ((x % n) + n) % n;\n\n  function getElementWidth(element) {\n    return element.clientWidth;\n  }\n\n  function setScrollSpeed(width) {\n    return 20;\n  }\n};\n","import framify from \".\";\nimport \"./framify.css\";\n\nframify();\n"]}